loader = new THREE.TextureLoader();
loader.load('images/img.png', function (texture) {
    createPoints(texture);
    render();
});


function createPoints(texture) {
    let geometry = new THREE.Geometry();
    let material = new THREE.PointsMaterial({
        //pointsを使用する場合はMaterialのサイズで調整する
        size: 0.2,
        color: 0xffffff,
        vertexColors: true,
        map: texture,
        transparent: true,
    });

    let maxLength = 2000;

    for (let i = 0; i < maxLength; i++) {

        let pos = getPostion(
            Math.random() * width,
            Math.random() * height,
            Math.random() * width
        );

        //頂点データを生成
        let particle = new THREE.Vector3(pos.x, pos.y, pos.z);

        //頂点色を設定
        let color = new THREE.Color(0xffffff);

        //頂点データをジオメトリに追加
        geometry.vertices.push(particle);


        //頂点色をジオメトリに追加
        geometry.colors.push(color);

    }

    point = new THREE.Points(geometry, material);
    scene.add(point);
}
